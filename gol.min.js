var githubOfLife=function(){var e=$("#calendar-graph").find("g>g");var t=e.length-2;var n=7;var r={dead:"#eeeeee",fourth:"#d6e685",third:"#8cc665",second:"#44a340",first:"#1e6823"};var i=[[-1,-1],[0,-1],[+1,-1],[-1,0],[+1,0],[-1,+1],[0,+1],[+1,+1]];var s=function(t){return e[t+1]};var o=function(e,t){var n=$(s(e)).children("rect")[t];if(n!=undefined){n.row=e;n.col=t}return n};var u=function(e,t){return t!=undefined?$(o(e,t)).css("fill"):$(e).css("fill")};var a=function(e,t){$(e).css("fill",t)};var f=function(e,t,n){a(o(e,t),n)};var l=function(e,t){return u(e,t)!=r.dead};var c=function(e,t){if(t!=undefined){f(e,t,r.dead)}else{a(e,r.dead)}};var h=function(e,t){var n;var r=[];for(n in i){var s=o(e+i[n][0],t+i[n][1]);if(s!=undefined){r.push(s)}}return r};var p=function(e,t,n){var r=[];n=n||h(e,t);$.each(n,function(e,t){if(l(t)){r.push(t)}});return r};var d=function(e){var t=["dead","first","second","third","fourth"];var n=[0,0,0,0,0];$.each(e,function(e,t){switch(u(t)){case r.dead:n[0]++;break;case r.fourth:n[4]++;break;case r.third:n[3]++;break;case r.second:n[2]++;break;case r.first:n[1]++;break}});return r[t[n.indexOf(Math.max(n[0],n[1],n[2],n[3],n[4]))]]};var v=function(){for(var e=0;e<t;e++){for(var n=0;n<t;n++){var r=o(e,n);var i=h(e,n);var s=p(e,n,i);var u=s.length;if(l(r)&&(u<=1||u>=4)){c(r)}else if(!l(r)&&u==3){a(r,d(s))}}}};var m;var g=function(){clearInterval(m)};var y=function(e){g();m=setInterval(v,e||1e3)};return{nextStep:v,start:y,stop:g}}();githubOfLife.start();